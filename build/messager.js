window.Messager=function(){"use strict";var n="[PROJECT_NAME]",t="postMessage"in window,e=window.console||{log:function(n){window.alert(n)}};if(!window.JSON){var i=document.createElement("script");i.src="http://libs.baidu.com/json/json2/json2.js";document.getElementsByTagName("head")[0].appendChild(i)}if(!t&&!window.navigator.listenFunc){window.navigator.listenFunc={};window.navigator.userListen={}}function o(t,e,i){this.listenFunc=[];this.target=e;this.name=i;n=t||n;if(typeof n!=="string"){n=n.toString()}this.init()}o.prototype.init=function(){var e=this;var i=function(i){var o="",s;if(typeof i==="object"){i=i.data.toString()}if(n+e.name!==i.substring(0,i.indexOf("|cy|"))){return}i=i.slice((n+e.name).length+4);if(i.indexOf("CY_TYPE_OBJECT")>=0){o="object";i=i.replace("CY_TYPE_OBJECT","");i=JSON.parse(i)}if(t){\u00cf;for(s=0;s<e.listenFunc.length;s++){e.listenFunc[s](i)}}else{window.navigator.userListen[n+e.name+"|cy|"](i)}};if(t){if("addEventListener"in document){window.addEventListener("message",i,false)}else if("attachEvent"in document){window.attachEvent("onmessage",i)}}else{window.navigator.listenFunc[n+this.name+"|cy|"]=i}};o.prototype.post=function(i,o){var s="";if(typeof i!=="string"&&typeof i!=="object"){e.log("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u636e\u7c7b\u578b;");return}if(typeof i=="object"){s="CY_TYPE_OBJECT";i=JSON.stringify(i)}i=s+i;if(i.length>=1e4){e.log("\u6570\u636e\u957f\u5ea6\u8d85\u8fc7\u9650\u5236");return}if(t){this.target.postMessage(n+o+"|cy|"+i,"*")}else{var a=window.navigator.listenFunc[n+o+"|cy|"];if(typeof a==="function"){a(n+o+"|cy|"+i)}}};o.prototype.listen=function(e){if(t){this.listenFunc.push(e)}else{window.navigator.userListen[n+this.name+"|cy|"]=e}};o.prototype.destrory=function(){if(t){this.listenFunc.pop()}else{window.navigator.userListen[n+this.name+"|cy|"]=null}};return o}();