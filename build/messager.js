window.Messager=function(){"use strict";var n="[PROJECT_NAME]",t="postMessage"in window,i=window.console||{log:function(n){alert(n)}};if(!t&&!window.navigator.listenFunc){window.navigator.listenFunc={};window.navigator.userListen={}}function e(t,i,e,s){if(!s){s="*"}this.listenFunc=[];this.target=i;this.origin=s;this.name=e;n=t||n;if(typeof n!=="string"){n=n.toString()}this.init()}e.prototype.init=function(){var i=this;var e=function(e){if(typeof e==="object"){e=e.data}if(n+i.name!==e.substring(0,e.indexOf("|cy|"))){return}e=e.slice((n+i.name).length+4);var s;if(t){for(s=0;s<i.listenFunc.length;s++){i.listenFunc[s](e)}}else{window.navigator.userListen[n+i.name+"|cy|"](e)}};if(t){if("addEventListener"in document){window.addEventListener("message",e,false)}else if("attachEvent"in document){window.attachEvent("onmessage",e)}}else{window.navigator.listenFunc[n+this.name+"|cy|"]=e}};e.prototype.post=function(e,s){if(typeof e!=="string"){i.log("\u8bf7\u8f93\u5165\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u6570\u636e;");return}if(e.length>=1e4){i.log("\u6570\u636e\u957f\u5ea6\u8d85\u8fc7\u9650\u5236");return}if(t){this.target.postMessage(n+s+"|cy|"+e,this.origin)}else{var o=window.navigator.listenFunc[n+s+"|cy|"];if(typeof o==="function"){o(n+s+"|cy|"+e)}}};e.prototype.listen=function(i){if(t){this.listenFunc.push(i)}else{window.navigator.userListen[n+this.name+"|cy|"]=i}};return e}();