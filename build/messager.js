window.Messager=function(){"use strict";var prefix="[PROJECT_NAME]",supportPostMessage="postMessage"in window,supportConsole="console"in window;function Messager(e,s,t){if(!t){t="*"}this.listenFunc=[];this.target=s;this.origin=t;prefix=e||prefix;if(typeof prefix!=="string"){prefix=prefix.toString()}this.init()}Messager.prototype.init=function(){var self=this;var callback=function(msg){if(typeof msg=="object"&&msg.data){msg=msg.data}if(prefix!=msg.substring(0,msg.indexOf("|cy|"))){return}msg=msg.slice(prefix.length+4);msg=eval("("+msg+")");if(supportPostMessage){for(var i=0;i<self.listenFunc.length;i++){self.listenFunc[i](msg)}}else{window.navigator.listenFunc(msg)}};if(supportPostMessage){if("addEventListener"in document){window.addEventListener("message",callback,false)}else if("attachEvent"in document){window.attachEvent("onmessage",callback)}}else{window.navigator[prefix+"|cy|"+this.name]=callback}};Messager.prototype.post=function(e){if(typeof e=="object"){var s=function(e){var t=[];var i=function(e){if(typeof e=="object"&&e!=null)return s(e);return/^(string|number)$/.test(typeof e)?"'"+e+"'":e};for(var n in e)t.push("'"+n+"':"+i(e[n]));return"{"+t.join(",")+"}"};e=s(e)}else{throw"\u8bf7\u4f20\u8f93json\u6570\u636e"}if(e.length>=1e4){if(supportConsole){console.log("\u6570\u636e\u957f\u5ea6\u8d85\u8fc7\u9650\u5236");return}}if(supportPostMessage){this.target.postMessage(prefix+"|cy|"+e,this.origin)}else{var t=window.navigator[prefix+"|cy|"+this.name];if(typeof t=="function"){t(prefix+e,this.target)}}};Messager.prototype.listen=function(e){if(supportPostMessage){this.listenFunc.push(e)}else{window.navigator.listenFunc=e}};return Messager}();